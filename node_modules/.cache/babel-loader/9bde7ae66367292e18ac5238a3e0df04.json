{"ast":null,"code":"export function $(expr, con) {\n  return typeof expr === 'string' ? (con || document).querySelector(expr) : expr || null;\n}\nexport function createSVG(tag, attrs) {\n  const elem = document.createElementNS('http://www.w3.org/2000/svg', tag);\n\n  for (let attr in attrs) {\n    if (attr === 'append_to') {\n      const parent = attrs.append_to;\n      parent.appendChild(elem);\n    } else if (attr === 'innerHTML') {\n      elem.innerHTML = attrs.innerHTML;\n    } else {\n      elem.setAttribute(attr, attrs[attr]);\n    }\n  }\n\n  return elem;\n}\nexport function animateSVG(svgElement, attr, from, to) {\n  const animatedSvgElement = getAnimationElement(svgElement, attr, from, to);\n\n  if (animatedSvgElement === svgElement) {\n    // triggered 2nd time programmatically\n    // trigger artificial click event\n    const event = document.createEvent('HTMLEvents');\n    event.initEvent('click', true, true);\n    event.eventName = 'click';\n    animatedSvgElement.dispatchEvent(event);\n  }\n}\n\nfunction getAnimationElement(svgElement, attr, from, to, dur = '0.4s', begin = '0.1s') {\n  const animEl = svgElement.querySelector('animate');\n\n  if (animEl) {\n    $.attr(animEl, {\n      attributeName: attr,\n      from,\n      to,\n      dur,\n      begin: 'click + ' + begin // artificial click\n\n    });\n    return svgElement;\n  }\n\n  const animateElement = createSVG('animate', {\n    attributeName: attr,\n    from,\n    to,\n    dur,\n    begin,\n    calcMode: 'spline',\n    values: from + ';' + to,\n    keyTimes: '0; 1',\n    keySplines: cubic_bezier('ease-out')\n  });\n  svgElement.appendChild(animateElement);\n  return svgElement;\n}\n\nfunction cubic_bezier(name) {\n  return {\n    ease: '.25 .1 .25 1',\n    linear: '0 0 1 1',\n    'ease-in': '.42 0 1 1',\n    'ease-out': '0 0 .58 1',\n    'ease-in-out': '.42 0 .58 1'\n  }[name];\n}\n\n$.on = (element, event, selector, callback) => {\n  if (!callback) {\n    callback = selector;\n    $.bind(element, event, callback);\n  } else {\n    $.delegate(element, event, selector, callback);\n  }\n};\n\n$.off = (element, event, handler) => {\n  element.removeEventListener(event, handler);\n};\n\n$.bind = (element, event, callback) => {\n  event.split(/\\s+/).forEach(function (event) {\n    element.addEventListener(event, callback);\n  });\n};\n\n$.delegate = (element, event, selector, callback) => {\n  element.addEventListener(event, function (e) {\n    const delegatedTarget = e.target.closest(selector);\n\n    if (delegatedTarget) {\n      e.delegatedTarget = delegatedTarget;\n      callback.call(this, e, delegatedTarget);\n    }\n  });\n};\n\n$.closest = (selector, element) => {\n  if (!element) return null;\n\n  if (element.matches(selector)) {\n    return element;\n  }\n\n  return $.closest(selector, element.parentNode);\n};\n\n$.attr = (element, attr, value) => {\n  if (!value && typeof attr === 'string') {\n    return element.getAttribute(attr);\n  }\n\n  if (typeof attr === 'object') {\n    for (let key in attr) {\n      $.attr(element, key, attr[key]);\n    }\n\n    return;\n  }\n\n  element.setAttribute(attr, value);\n};","map":{"version":3,"sources":["C:/Mikutech/mikutechWebProgrammingTest2/src/frappe-gantt/svg_utils.js"],"names":["$","expr","con","document","querySelector","createSVG","tag","attrs","elem","createElementNS","attr","parent","append_to","appendChild","innerHTML","setAttribute","animateSVG","svgElement","from","to","animatedSvgElement","getAnimationElement","event","createEvent","initEvent","eventName","dispatchEvent","dur","begin","animEl","attributeName","animateElement","calcMode","values","keyTimes","keySplines","cubic_bezier","name","ease","linear","on","element","selector","callback","bind","delegate","off","handler","removeEventListener","split","forEach","addEventListener","e","delegatedTarget","target","closest","call","matches","parentNode","value","getAttribute","key"],"mappings":"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","sourcesContent":["export function $(expr, con) {\r\n    return typeof expr === 'string'\r\n        ? (con || document).querySelector(expr)\r\n        : expr || null;\r\n}\r\n\r\nexport function createSVG(tag, attrs) {\r\n    const elem = document.createElementNS('http://www.w3.org/2000/svg', tag);\r\n    for (let attr in attrs) {\r\n        if (attr === 'append_to') {\r\n            const parent = attrs.append_to;\r\n            parent.appendChild(elem);\r\n        } else if (attr === 'innerHTML') {\r\n            elem.innerHTML = attrs.innerHTML;\r\n        } else {\r\n            elem.setAttribute(attr, attrs[attr]);\r\n        }\r\n    }\r\n    return elem;\r\n}\r\n\r\nexport function animateSVG(svgElement, attr, from, to) {\r\n    const animatedSvgElement = getAnimationElement(svgElement, attr, from, to);\r\n\r\n    if (animatedSvgElement === svgElement) {\r\n        // triggered 2nd time programmatically\r\n        // trigger artificial click event\r\n        const event = document.createEvent('HTMLEvents');\r\n        event.initEvent('click', true, true);\r\n        event.eventName = 'click';\r\n        animatedSvgElement.dispatchEvent(event);\r\n    }\r\n}\r\n\r\nfunction getAnimationElement(\r\n    svgElement,\r\n    attr,\r\n    from,\r\n    to,\r\n    dur = '0.4s',\r\n    begin = '0.1s'\r\n) {\r\n    const animEl = svgElement.querySelector('animate');\r\n    if (animEl) {\r\n        $.attr(animEl, {\r\n            attributeName: attr,\r\n            from,\r\n            to,\r\n            dur,\r\n            begin: 'click + ' + begin // artificial click\r\n        });\r\n        return svgElement;\r\n    }\r\n\r\n    const animateElement = createSVG('animate', {\r\n        attributeName: attr,\r\n        from,\r\n        to,\r\n        dur,\r\n        begin,\r\n        calcMode: 'spline',\r\n        values: from + ';' + to,\r\n        keyTimes: '0; 1',\r\n        keySplines: cubic_bezier('ease-out')\r\n    });\r\n    svgElement.appendChild(animateElement);\r\n\r\n    return svgElement;\r\n}\r\n\r\nfunction cubic_bezier(name) {\r\n    return {\r\n        ease: '.25 .1 .25 1',\r\n        linear: '0 0 1 1',\r\n        'ease-in': '.42 0 1 1',\r\n        'ease-out': '0 0 .58 1',\r\n        'ease-in-out': '.42 0 .58 1'\r\n    }[name];\r\n}\r\n\r\n$.on = (element, event, selector, callback) => {\r\n    if (!callback) {\r\n        callback = selector;\r\n        $.bind(element, event, callback);\r\n    } else {\r\n        $.delegate(element, event, selector, callback);\r\n    }\r\n};\r\n\r\n$.off = (element, event, handler) => {\r\n    element.removeEventListener(event, handler);\r\n};\r\n\r\n$.bind = (element, event, callback) => {\r\n    event.split(/\\s+/).forEach(function(event) {\r\n        element.addEventListener(event, callback);\r\n    });\r\n};\r\n\r\n$.delegate = (element, event, selector, callback) => {\r\n    element.addEventListener(event, function(e) {\r\n        const delegatedTarget = e.target.closest(selector);\r\n        if (delegatedTarget) {\r\n            e.delegatedTarget = delegatedTarget;\r\n            callback.call(this, e, delegatedTarget);\r\n        }\r\n    });\r\n};\r\n\r\n$.closest = (selector, element) => {\r\n    if (!element) return null;\r\n\r\n    if (element.matches(selector)) {\r\n        return element;\r\n    }\r\n\r\n    return $.closest(selector, element.parentNode);\r\n};\r\n\r\n$.attr = (element, attr, value) => {\r\n    if (!value && typeof attr === 'string') {\r\n        return element.getAttribute(attr);\r\n    }\r\n\r\n    if (typeof attr === 'object') {\r\n        for (let key in attr) {\r\n            $.attr(element, key, attr[key]);\r\n        }\r\n        return;\r\n    }\r\n\r\n    element.setAttribute(attr, value);\r\n};\r\n"]},"metadata":{},"sourceType":"module"}